<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>é€šå­¦ã‚¨ãƒªã‚¢æƒ…å ±ã¾ã¨ã‚</title>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
:root{
  --bg:#f8fafc;
  --panel:#ffffff;
  --border:#e2e8f0;
  --accent:#ef4444;
  --text-main:#1e293b;
  --text-sub:#64748b;
  --shadow:0 4px 6px -1px rgb(0 0 0 / 0.1);
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
  background:var(--bg);
  font-family:'Noto Sans JP',sans-serif;
  color:var(--text-main);
}
header{
  padding:1.5rem;
  background:#ffffff;
  border-bottom:3px solid var(--accent);
  text-align:center;
  box-shadow:var(--shadow);
  transition:0.3s;
}
header h1{font-size:1.6rem;}
main{max-width:1200px;margin:0 auto;padding:1rem;}
.section{margin-bottom:2.5rem;}
.section-label{
  display:flex;align-items:center;gap:0.5rem;
  margin-bottom:1rem;padding-bottom:0.5rem;
  border-bottom:2px solid var(--border);
}
.accent-icon{color:var(--accent);}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(340px,1fr));
  gap:1.2rem;
}
.cam-card{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 2px 4px rgba(0,0,0,0.05);
}
.cam-title{
  padding:0.7rem 1rem;
  font-weight:700;
  font-size:0.9rem;
  background:#f1f5f9;
  border-bottom:1px solid var(--border);
}
.cam-body{
  position:relative;
  width:100%;
  padding-top:56.25%;
}
.cam-body iframe,.cam-body img{
  position:absolute;
  top:0;left:0;
  width:100%;height:100%;
  object-fit:cover;
  border:none;
}
.refresh-note{
  font-size:0.7rem;
  color:var(--text-sub);
  padding:0.4rem 1rem;
  text-align:right;
}

/* åœ°å›³ */
#camera-map{
  width:100%;
  height:420px;
  border-radius:12px;
  border:1px solid var(--border);
  box-shadow:var(--shadow);
}

/* ã‚¹ãƒãƒ›æœ€é©åŒ– */
@media(max-width:640px){
  header h1{font-size:1.2rem;}
  #camera-map{height:300px;}
  .grid{grid-template-columns:1fr;}
  main{padding:0.5rem;}
}
footer{
  text-align:center;
  padding:2rem;
  font-size:0.8rem;
  color:var(--text-sub);
  border-top:1px solid var(--border);
}
</style>
</head>

<body>

<header>
<h1 id="page-title">é€šå­¦ã‚¨ãƒªã‚¢æƒ…å ±ã¾ã¨ã‚</h1>
</header>

<main>

<!-- åœ°å›³ -->
<section class="section">
<div class="section-label">
<span class="accent-icon">ğŸ—ºï¸</span>
<h2>ãƒ©ã‚¤ãƒ–ã‚«ãƒ¡ãƒ©ãƒ»äº¤é€šãƒãƒƒãƒ—</h2>
</div>
<div id="camera-map"></div>
</section>

<!-- ã‚«ãƒ¡ãƒ© -->
<section class="section">
<div class="section-label">
<span class="accent-icon">ğŸ”º</span>
<h2>ãƒ©ã‚¤ãƒ–ã‚«ãƒ¡ãƒ©</h2>
</div>
<div class="grid">

<div class="cam-card">
<div class="cam-title">å¤§é€šå…¬åœ’è¥¿4ä¸ç›® â€” STV</div>
<div class="cam-body">
<img src="https://www.stv.jp/cameraimg/ohdori4_L.jpg">
</div>
<div class="refresh-note">STV</div>
</div>

<div class="cam-card">
<div class="cam-title">å¤§é€šãƒ“ãƒƒã‚» â€” HBC</div>
<div class="cam-body">
<img src="https://www.hbc.co.jp/info-cam/media/sapporohd_720.jpg">
</div>
<div class="refresh-note">HBC</div>
</div>

<div class="cam-card">
<div class="cam-title">ã‚¨ã‚¹ã‚³ãƒ³ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä»˜è¿‘ â€” STV</div>
<div class="cam-body">
<iframe src="https://www.youtube.com/embed/C28jH3sU2M8?autoplay=1&mute=1" allowfullscreen></iframe>
</div>
<div class="refresh-note">YouTube</div>
</div>

</div>
</section>

</main>

<footer>
é€šå­¦ã‚¨ãƒªã‚¢æƒ…å ±ã¾ã¨ã‚ â€” é…ä¿¡å…ƒã®éƒ½åˆã«ã‚ˆã‚Šå¤‰æ›´ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™
</footer>

<script>
// ===== åœ°å›³åˆæœŸåŒ– =====
const map = L.map('camera-map').setView([43.06,141.35],10);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
 attribution:'Â© OpenStreetMap contributors'
}).addTo(map);

// é€šå¸¸ã‚«ãƒ¡ãƒ©ãƒãƒ¼ã‚«ãƒ¼
const cameraPoints=[
 {name:"å¤§é€šå…¬åœ’è¥¿4ä¸ç›®",lat:43.0608,lng:141.3515},
 {name:"ã‚¨ã‚¹ã‚³ãƒ³ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰",lat:42.9785,lng:141.4734}
];

cameraPoints.forEach(p=>{
 L.marker([p.lat,p.lng]).addTo(map)
  .bindPopup("<b>"+p.name+"</b>");
});

// JR / ãƒã‚¹ã‚¢ã‚¤ã‚³ãƒ³
const jrIcon=L.icon({
 iconUrl:"https://cdn-icons-png.flaticon.com/512/854/854878.png",
 iconSize:[28,28]
});
const busIcon=L.icon({
 iconUrl:"https://cdn-icons-png.flaticon.com/512/61/61231.png",
 iconSize:[28,28]
});

const transportPoints=[
 {name:"æœ­å¹Œé§…",lat:43.0687,lng:141.3508,type:"jr"},
 {name:"æ–°ã•ã£ã½ã‚é§…",lat:43.0382,lng:141.4725,type:"jr"},
 {name:"åŒ—åºƒå³¶é§…",lat:42.9794,lng:141.5677,type:"jr"},
 {name:"ä¸­å¤®ãƒã‚¹",lat:43.0605,lng:141.3530,type:"bus"}
];

transportPoints.forEach(p=>{
 L.marker([p.lat,p.lng],{
  icon:p.type==="jr"?jrIcon:busIcon
 }).addTo(map)
  .bindPopup("<b>"+p.name+"</b>");
});

// ===== å¤§é›ªè­¦å ±ãƒã‚§ãƒƒã‚¯ =====
async function checkSnowWarning(){
 try{
  const res=await fetch("https://www.jma.go.jp/bosai/warning/data/warning/016000.json");
  const data=await res.json();
  const text=JSON.stringify(data);

  if(text.includes("å¤§é›ª")){
    const header=document.querySelector("header");
    header.style.background="#b91c1c";
    header.style.color="#ffffff";
    document.getElementById("page-title").innerText="âš  å¤§é›ªè­¦å ±ç™ºä»¤ä¸­";
  }
 }catch(e){}
}
checkSnowWarning();

</script>

</body>
</html>
